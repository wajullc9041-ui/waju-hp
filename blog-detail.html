<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZHLJ5K19ZE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-ZHLJ5K19ZE');
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>„Éñ„É≠„Ç∞Ë©≥Á¥∞ | ÂêàÂêå‰ºöÁ§æWaJu</title>
  <meta name="description" content="ÂêàÂêå‰ºöÁ§æWaJu„ÅÆ„Éñ„É≠„Ç∞Ë©≥Á¥∞„Éö„Éº„Ç∏„Åß„Åô„ÄÇCARELAY„ÇÑ‰ªãË≠∑„ÉªÁ¶èÁ•âÊ•≠Áïå„Å´Èñ¢„Åô„ÇãÊúÄÊñ∞ÊÉÖÂ†±„Çí„ÅäÂ±ä„Åë„Åó„Åæ„Åô„ÄÇ" />

  <!-- ‚ñº Favicon / PWA„Çø„Ç∞ËøΩÂä†Ôºà‰ªñ„Éö„Éº„Ç∏Áµ±‰∏ÄÔºâ ‚ñº -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://htnmjsqgoapvuanrsuma.supabase.co/storage/v1/object/public/assets/favicon-32x32.png?v=1">
  <link rel="icon" type="image/png" sizes="16x16" href="https://htnmjsqgoapvuanrsuma.supabase.co/storage/v1/object/public/assets/favicon-16x16.png?v=1">
  <link rel="apple-touch-icon" sizes="180x180" href="https://htnmjsqgoapvuanrsuma.supabase.co/storage/v1/object/public/assets/apple-touch-icon.png?v=1">
  <link rel="manifest" href="https://htnmjsqgoapvuanrsuma.supabase.co/storage/v1/object/public/assets/site.webmanifest?v=1">
  <meta name="theme-color" content="#0f172a">
  <!-- ‚ñ≤ „Åì„Åì„Åæ„ÅßËøΩÂä† ‚ñ≤ -->

  <style>
    :root {
      --blue:#0d6efd;
      --gray-100:#eef1f5;
      --gray-200:#eaecf0;
      --gray-300:#d8dbe0;
      --gray-600:#555;
    }
    html,body {
      margin:0;
      padding:0;
      background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-200) 100%);
      font-family:"Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Hiragino Kaku Gothic ProN","BIZ UDPGothic","Meiryo",sans-serif;
      color:#222;
    }
    header,footer{min-height:56px}
    main{max-width:960px;margin:0 auto;padding:24px;box-sizing:border-box;}

    /* ---------- Ë®ò‰∫ã„Éò„ÉÉ„ÉÄ„Éº ---------- */
    .title-wrap{
      display:flex;
      gap:16px;
      align-items:flex-start;
      margin:16px 0 8px;
      background: linear-gradient(135deg, #ffffff 0%, #f7f8fa 100%);
      border:none;
      border-radius:14px;
      box-shadow:0 3px 10px rgba(0,0,0,.12);
      padding:18px;
    }
    .thumb{width:100px;height:100px;border-radius:8px;object-fit:contain;background:#fff;}
    h1{font-size:1.8rem;line-height:1.3;margin:0 0 6px;font-weight:700;}
    .meta{color:var(--gray-600);font-size:.9rem;margin-bottom:8px}
    .cat{display:inline-block;background:#e7f1ff;color:#0b5ed7;font-size:.75rem;border-radius:999px;padding:3px 8px;margin-left:4px}

    /* ---------- „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ ---------- */
    .post-nav {
      max-width: 720px;
      margin: 18px auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      background: linear-gradient(135deg, #f1f3f6 0%, #e9ebef 100%);
      border:1px solid var(--gray-300);
      border-radius:10px;
      box-shadow:0 2px 5px rgba(0,0,0,.05);
      padding:8px 12px;
    }
    .nav-link{display:flex;align-items:center;gap:8px;color:var(--blue);text-decoration:none;font-weight:600}
    .nav-link.center{color:#111;}
    .nav-ico{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:999px;background:#e7f1ff}

    /* ---------- Êú¨Êñá ---------- */
    .content{
      background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
      border:none;
      border-radius:12px;
      box-shadow:0 3px 10px rgba(0,0,0,.08);
      padding:20px;
      min-height:48px;
    }

        /* ---------- Êú¨Êñá‰∏ãÂú∞ ---------- */
        .content h2, .content h3, .content h4 {
          color:#191c70;
          font-weight:700;
          margin-top:1.8em;
          margin-bottom:0.6em;
          line-height:1.4;
        }
        .content p {
          margin:1em 0;
          color:#222;
          line-height:1.9;
        }
        .content ul, .content ol {
          margin:1em 0 1em 1.6em;
          line-height:1.8;
        }
        .content li { margin-bottom:0.4em; }
        .content blockquote {
          background:#f8fafc;
          border-left:4px solid #06ccfe;
          border-radius:8px;
          padding:12px 16px;
          margin:1.4em 0;
          color:#333;
        }
        .content table {
          width:100%;
          border-collapse:collapse;
          margin:1.2em 0;
          font-size:0.95em;
          background:#fff;
          border:1px solid #d1d5db;
        }
        .content th, .content td {
          border:1px solid #d1d5db;
          padding:8px 10px;
          text-align:left;
        }
        .content th {
          background:#e8f4ff;
          color:#191c70;
          font-weight:700;
        }
        .content .card {
          background:#fff;
          border:1px solid #e5e7eb;
          border-radius:12px;
          padding:18px;
          box-shadow:0 2px 6px rgba(0,0,0,0.06);
          margin:1.6em 0;
        }
        .content .highlight {
          background:linear-gradient(135deg,#f0f6ff,#ffffff);
          border-left:6px solid #06ccfe;
          border-radius:10px;
          padding:14px 18px;
          margin:1.4em 0;
        }
        .content .cta {
          text-align:center;
          background:linear-gradient(90deg,#191c70,#06ccfe);
          color:#fff;
          padding:18px;
          border-radius:10px;
          margin:2em 0;
          font-weight:700;
        }
        .content .cta a {
          display:inline-block;
          background:#fff;
          color:#191c70;
          font-weight:700;
          padding:10px 18px;
          border-radius:9999px;
          text-decoration:none;
          margin-top:10px;
        }


       /* ÁîªÂÉè„Çµ„Ç§„Ç∫Ë™øÊï¥ÔºàËøΩÂä†Ôºâ */
      .content img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 12px auto;
      }

    /* ---------- „Çø„Ç∞ ---------- */
    .tags{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin:18px 0;
      border-top:1px solid var(--gray-300);
      border-bottom:1px solid var(--gray-300);
      padding:8px 0;
    }
    .tag{
      background:#f1f3f5;
      color:#333;
      border-radius:999px;
      padding:4px 10px;
      font-size:.8rem;
    }

    /* ---------- „Ç∑„Çß„Ç¢„Éú„Çø„É≥ ---------- */
    .share{
      display:flex;
      justify-content:flex-end;
      align-items:center;
      gap:12px;
      margin:12px 0 20px;
    }
    .share .label{
      color:#555;
      font-size:.85rem;
      margin-right:0;
      opacity:0.8;
    }
    .sbtn{width:40px;height:40px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;color:#fff;text-decoration:none}
    .sbtn svg{width:20px;height:20px;display:block}
    .sbtn.x{background:#000}
    .sbtn.fb{background:#1877f2}
    .sbtn.line{background:#06c755}
    .sbtn.ig{background:#e1306c}
    .sbtn.mail{background:#fbbc05;color:#000}

    /* ---------- „Çπ„Éû„ÉõÂØæÂøú ---------- */
    @media (max-width:640px){
      main { padding:12px 0; }
      .title-wrap,
      .content,
      .tags,
      .share,
      .post-nav {
        margin-left:0;
        margin-right:0;
        border-radius:0;
      }
      .thumb{width:84px;height:84px}
      h1{font-size:1.5rem}
    }
  </style>
</head>
<body>
  <header id="site-header"></header>

  <main id="page-main">
    <!-- ‰∏ä„Éä„Éì -->
    <nav class="post-nav" aria-label="Ë®ò‰∫ã„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ ‰∏ä">
      <a id="prevTop" class="nav-link" href="#">
        <span class="nav-ico" aria-hidden="true">‚¨Ö</span><span>Ââç„ÅÆË®ò‰∫ã</span>
      </a>
      <a class="nav-link center" href="/blog/">
        <span class="nav-ico" aria-hidden="true">üè†</span><span>‰∏ÄË¶ß„Å´Êàª„Çã</span>
      </a>
      <a id="nextTop" class="nav-link" href="#">
        <span>Ê¨°„ÅÆË®ò‰∫ã</span><span class="nav-ico" aria-hidden="true">‚û°</span>
      </a>
    </nav>

    <!-- „Çø„Ç§„Éà„É´ÔºÜ„É°„Çø -->
    <div class="title-wrap">
      <img id="postThumb" class="thumb" alt="„Çµ„É†„Éç„Ç§„É´" />
      <div>
        <h1 id="postTitle"></h1>
        <div class="meta">
          <time id="postDate"></time>
          <span id="postCat" class="cat"></span>
        </div>
      </div>
    </div>

    <!-- Êú¨Êñá -->
    <article id="postContent" class="content"></article>

    <!-- „Çø„Ç∞ -->
    <div id="postTags" class="tags"></div>

    <!-- „Ç∑„Çß„Ç¢ -->
    <div class="share">
      <span class="label">„Ç∑„Çß„Ç¢„Åô„ÇãÔºö</span>
      <a id="shareX" class="sbtn x" target="_blank" rel="noopener noreferrer" title="X„Åß„Ç∑„Çß„Ç¢">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.36 2H21l-7.53 9.55L21.5 22h-2.95l-6.07-7.63L6.4 22H3l7.95-10.5L2.5 2h2.95l5.61 7.05L18.36 2z"/></svg>
      </a>
      <a id="shareFb" class="sbtn fb" target="_blank" rel="noopener noreferrer" title="Facebook„Åß„Ç∑„Çß„Ç¢">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M22 12a10 10 0 1 0-11.5 9.95v-7.04H8v-2.91h2.5V9.5c0-2.5 1.5-3.9 3.7-3.9 1.07 0 2.2.19 2.2.19v2.4h-1.24c-1.22 0-1.6.76-1.6 1.54v1.85H16l-.4 2.91h-2.5v7.04A10 10 0 0 0 22 12z"/></svg>
      </a>
      <a id="shareLine" class="sbtn line" target="_blank" rel="noopener noreferrer" title="LINE„Åß„Ç∑„Çß„Ç¢">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.7 4.3A10 10 0 0 0 12 2C6.5 2 2 6 2 11c0 2.6 1.2 4.9 3.2 6.5l-.6 3.9 4.1-2.2c1 .3 2 .4 3.2.4 5.5 0 10-4 10-9 0-2.4-1-4.6-2.8-6.3z"/></svg>
      </a>
      <a id="shareIg" class="sbtn ig" target="_blank" rel="noopener noreferrer" title="Instagram„Å∏">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7zm0 2.2a2.8 2.8 0 1 1 0 5.6 2.8 2.8 0 0 1 0-5.6zM18 6.7a1.1 1.1 0 1 0 0 2.2 1.1 1.1 0 0 0 0-2.2z"/></svg>
      </a>
      <a id="shareMail" class="sbtn mail" target="_blank" rel="noopener noreferrer" title="„É°„Éº„É´„ÅßÂÖ±Êúâ">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm0 2v.01L12 13l8-6.99V6H4z"/></svg>
      </a>
    </div>

    <!-- ‰∏ã„Éä„Éì -->
    <nav class="post-nav" aria-label="Ë®ò‰∫ã„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ ‰∏ã">
      <a id="prevBottom" class="nav-link" href="#">
        <span class="nav-ico" aria-hidden="true">‚¨Ö</span><span>Ââç„ÅÆË®ò‰∫ã</span>
      </a>
      <a class="nav-link center" href="/blog/">
        <span class="nav-ico" aria-hidden="true">üè†</span><span>‰∏ÄË¶ß„Å´Êàª„Çã</span>
      </a>
      <a id="nextBottom" class="nav-link" href="#">
        <span>Ê¨°„ÅÆË®ò‰∫ã</span><span class="nav-ico" aria-hidden="true">‚û°</span>
      </a>
    </nav>
  </main>

  <footer id="site-footer"></footer>

  <script src="/env.js"></script>
  <script type="module" src="/hf.js"></script>

  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
    const sb = createClient(
      window.env.NEXT_PUBLIC_SUPABASE_URL,
      window.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,
      { auth: { persistSession: false, autoRefreshToken: false, storageKey: "sb-waju-blog" } }
    );
    const $ = (s) => document.querySelector(s);
    function fmt(d){ try{ return new Date(d).toLocaleDateString(); }catch{return ""} }

    async function load(){
      const params = new URLSearchParams(location.search);
      const slug = params.get("slug");
      if(!slug){ $("#postTitle").textContent = "Ë®ò‰∫ã„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì"; return; }

      const { data, error } = await sb.from("articles").select("*").eq("slug", slug).single();
      if(error){ console.error("Ë®ò‰∫ãÂèñÂæó„Ç®„É©„Éº:", error); $("#postTitle").textContent="Ë®ò‰∫ã„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü"; return; }

      $("#postTitle").textContent = data.title || "";
      $("#postDate").textContent = fmt(data.created_at);
      $("#postCat").textContent = data.category || "";
      $("#postThumb").src = data.thumbnail_url || "";
      $("#postThumb").alt = (data.title || "„Çµ„É†„Éç„Ç§„É´") + "„ÅÆÁîªÂÉè";
      $("#postContent").innerHTML = data.content || "";

      const tagWrap = $("#postTags");
      tagWrap.innerHTML = "";
      if(Array.isArray(data.tags)){
        for(const t of data.tags){
          const span = document.createElement("span");
          span.className = "tag";
          span.textContent = "#" + t;
          tagWrap.appendChild(span);
        }
      }

      const u = encodeURIComponent(location.href);
      const t = encodeURIComponent(data.title || document.title);
      $("#shareX").href = `https://twitter.com/intent/tweet?url=${u}&text=${t}`;
      $("#shareFb").href = `https://www.facebook.com/sharer/sharer.php?u=${u}`;
      $("#shareLine").href = `https://social-plugins.line.me/lineit/share?url=${u}`;
      $("#shareIg").href = `https://www.instagram.com/?url=${u}`;
      $("#shareMail").href = `mailto:?subject=${t}&body=${t}%0D%0A${u}`;

      const { data: newer } = await sb.from("articles").select("title,slug,created_at").gt("created_at", data.created_at).order("created_at",{ascending:true}).limit(1);
      const { data: older } = await sb.from("articles").select("title,slug,created_at").lt("created_at", data.created_at).order("created_at",{ascending:false}).limit(1);

      for(const id of ["prevTop","prevBottom"]){
        const a=$("#"+id);
        if(older && older.length){
          a.href="/blog-detail.html?slug="+older[0].slug;
          a.title="‚Üê "+older[0].title;
        }else{ a.classList.add("disabled"); a.style.opacity=".4"; a.style.pointerEvents="none"; }
      }
      for(const id of ["nextTop","nextBottom"]){
        const a=$("#"+id);
        if(newer && newer.length){
          a.href="/blog-detail.html?slug="+newer[0].slug;
          a.title=newer[0].title+" ‚Üí";
        }else{ a.classList.add("disabled"); a.style.opacity=".4"; a.style.pointerEvents="none"; }
      }
    }
    load();
  </script>
</body>
</html>
